#+TITLE: Bitcoin in docker
#+PROPERTY: header-args :session *shell bitcoin* :results silent raw
#+OPTIONS: ^:nil

** Contents                                                           :TOC_3:
  - [[#select-docker-image-version][Select docker image version]]
  - [[#docker-image-pull][Docker image pull]]
  - [[#see-help][See help]]
  - [[#create-volume][Create volume]]
  - [[#run-bitcoind][Run bitcoind]]
    - [[#run-bitcoind-in-regtest-mode][Run bitcoind in regtest mode]]
    - [[#run-pruned-node][Run pruned node]]

** Select docker image version

#+BEGIN_SRC sh
IMAGE="ruimarinho/bitcoin-core"
TAG="0.20.1-alpine"
#+END_SRC

** Docker image pull

#+BEGIN_SRC sh
docker pull $IMAGE:$TAG
#+END_SRC

** See help

#+BEGIN_SRC sh
docker run --rm ruimarinho/bitcoin-core --help
#+END_SRC

** Create volume

#+BEGIN_SRC sh
docker volume create bitcoin-data
#+END_SRC

** Run bitcoind
*** Run bitcoind in regtest mode

#+BEGIN_SRC sh
docker run --rm --name bitcoin --detach --mount source=bitcoin-data,target=/home/bitcoin/.bitcoin ruimarinho/bitcoin-core -regtest
#+END_SRC

*** Run pruned node

#+BEGIN_SRC sh
docker run --rm --name bitcoin --detach --mount source=bitcoin-data,target=/home/bitcoin/.bitcoin ruimarinho/bitcoin-core -prune=10000
#+END_SRC

